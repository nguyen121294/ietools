<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forecast Moving Average Model</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        display: ["Space Grotesk", "sans-serif"]
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div id="header-placeholder"></div>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

    <div class="mb-8">
        <h1 class="text-3xl font-bold tracking-tight">Forecast Moving Average Model</h1>
        <p class="mt-2 text-slate-500 dark:text-slate-400">
            Dự báo nhu cầu bằng trung bình trượt đơn giản (Simple Moving Average).
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <div class="ie-card">
            <h2 class="ie-card-title">Thông số đầu vào</h2>

            <label class="ie-input-label">Dữ liệu lịch sử (cách nhau bằng dấu phẩy)</label>
            <textarea
                id="historyInput"
                class="ie-input min-h-[120px]"
                placeholder="Ví dụ: 120, 125, 130, 128, 140, 145"
            ></textarea>

            <label class="ie-input-label mt-3">Số kỳ trung bình trượt (window size)</label>
            <input type="number" class="ie-input" id="windowSize" min="2" value="3">

            <label class="ie-input-label mt-3">Số kỳ muốn dự báo</label>
            <input type="number" class="ie-input" id="forecastPeriods" min="1" value="3">

            <button class="ie-button w-full mt-6" onclick="calculateMovingAverageForecast()">
                Tính dự báo
            </button>

            <div id="result" class="ie-result mt-6 text-base"></div>
        </div>

        <div class="lg:col-span-2 space-y-6">
            <div class="ie-card">
                <h3 class="ie-section-title !mt-0">Biểu đồ dữ liệu và dự báo</h3>
                <div class="h-[360px] w-full">
                    <canvas id="forecastChart"></canvas>
                </div>
            </div>

            <div class="ie-card">
                <h3 class="ie-section-title !mt-0">Bảng kết quả dự báo</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="text-slate-500 border-b dark:border-slate-800">
                            <tr>
                                <th class="pb-2 font-semibold">Kỳ</th>
                                <th class="pb-2 font-semibold text-right">Giá trị dự báo</th>
                            </tr>
                        </thead>
                        <tbody id="forecastTableBody" class="dark:text-slate-300"></tbody>
                    </table>
                </div>
            </div>

            <div class="ie-card">
                <h3 class="ie-section-title !mt-0">Công thức</h3>
                <div class="ie-formula text-center py-4">
                    \[ F_{t+1} = \frac{D_t + D_{t-1} + ... + D_{t-n+1}}{n} \]
                </div>
                <p class="text-sm text-slate-600 dark:text-slate-400 mt-4">
                    Trong đó: \(n\) là số kỳ trung bình trượt, \(D\) là nhu cầu thực tế, \(F\) là giá trị dự báo.
                </p>
            </div>
        </div>
    </div>

</main>

<script src="/js/layout.js"></script>
<script src="./calculator.js"></script>
</body>
</html>
