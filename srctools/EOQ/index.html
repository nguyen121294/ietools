<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EOQ Calculator - Lượng Đặt Hàng Tối Ưu</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        display: ["Space Grotesk", "sans-serif"]
                    }
                }
            }
        }
    </script>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- MathJax cho công thức đẹp -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async></script>

    <!-- Shared CSS -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen font-display">

<!-- HEADER -->
<div id="header-placeholder"></div>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

    <div class="mb-8">
        <h1 class="text-3xl font-bold tracking-tight">EOQ - Lượng Đặt Hàng Tối Ưu</h1>
        <p class="mt-2 text-slate-500 dark:text-slate-400">
            Tính số lượng đặt hàng kinh tế giúp giảm thiểu tổng chi phí đặt hàng và lưu kho.
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Calculator Card -->
        <div class="ie-card">
            <h2 class="ie-card-title">Thông số đầu vào</h2>

            <label class="ie-input-label">Nhu cầu (D)</label>
            <input type="number" class="ie-input" id="demand" placeholder="Ví dụ: 1200" min="1">

            <label class="ie-input-label mt-3">Chi phí đặt hàng mỗi lần (S)</label>
            <input type="number" class="ie-input" id="orderCost" placeholder="Ví dụ: 100000" min="1">

            <label class="ie-input-label mt-3">Chi phí lưu kho mỗi đơn vị mỗi kỳ (H)</label>
            <input type="number" class="ie-input" id="holdingCost" placeholder="Ví dụ: 20000" min="1">

            <label class="ie-input-label mt-3">Kỳ tính (thời gian của D và H)</label>
            <select class="ie-input" id="period">
                <option value="năm">Năm</option>
                <option value="tháng">Tháng</option>
            </select>

            <button class="ie-button w-full mt-6" onclick="calculateEOQ()">
                Tính EOQ & Các chỉ số liên quan
            </button>

            <div id="result" class="ie-result mt-6 text-lg"></div>
        </div>

        <!-- Explanation & Results -->
        <div class="lg:col-span-2 space-y-8">

            <div class="ie-card">
                <h3 class="ie-section-title">EOQ là gì?</h3>
                <p class="text-slate-700 dark:text-slate-300 leading-relaxed">
                    EOQ (Economic Order Quantity) là mô hình xác định <strong>lượng đặt hàng tối ưu</strong> nhằm giảm thiểu tổng chi phí (chi phí đặt hàng + chi phí lưu kho).  
                    Mô hình giả định nhu cầu ổn định, không cho phép thiếu hàng, chi phí cố định.
                </p>
            </div>

            <div class="ie-card">
                <h3 class="ie-section-title">Công thức chính & các chỉ số liên quan</h3>
                
                <!-- EOQ chính -->
                <div class="mt-4">
                    <p class="font-semibold text-lg">1. Lượng đặt hàng tối ưu (EOQ)</p>
                    <div class="ie-formula text-center text-xl py-4">
                        \[ EOQ = \sqrt{\dfrac{2DS}{H}} \]
                    </div>
                </div>

                <!-- Các công thức phụ -->
                <div class="mt-6 space-y-6 text-sm">
                    <div>
                        <p class="font-semibold">2. Tồn kho trung bình (Cycle Inventory)</p>
                        <div class="ie-formula text-center py-2">
                            \[ \text{Cycle Inventory} = \dfrac{EOQ}{2} \]
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 mt-1">Mức tồn kho trung bình trong mỗi chu kỳ đặt hàng.</p>
                    </div>

                    <div>
                        <p class="font-semibold">3. Số lần đặt hàng trong kỳ (Number of Orders)</p>
                        <div class="ie-formula text-center py-2">
                            \[ N = \dfrac{D}{EOQ} \]
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 mt-1">Số lần phải đặt hàng trong toàn bộ kỳ (năm/tháng).</p>
                    </div>

                    <div>
                        <p class="font-semibold">4. Tổng chi phí đặt hàng (Total Ordering Cost)</p>
                        <div class="ie-formula text-center py-2">
                            \[ \text{Total Ordering Cost} = N \times S = \dfrac{D}{EOQ} \times S \]
                        </div>
                    </div>

                    <div>
                        <p class="font-semibold">5. Tổng chi phí lưu kho (Total Holding Cost)</p>
                        <div class="ie-formula text-center py-2">
                            \[ \text{Total Holding Cost} = \dfrac{EOQ}{2} \times H \]
                        </div>
                    </div>

                    <div>
                        <p class="font-semibold">6. Tổng chi phí liên quan (Total Relevant Cost)</p>
                        <div class="ie-formula text-center py-2 font-bold">
                            \[ TC = \dfrac{D}{EOQ} \times S + \dfrac{EOQ}{2} \times H \]
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 mt-1">Tổng chi phí đặt hàng + lưu kho (được tối thiểu hóa tại EOQ).</p>
                    </div>

                    <div>
                        <p class="font-semibold">7. Vòng quay tồn kho (Inventory Turnover)</p>
                        <div class="ie-formula text-center py-2">
                            \[ \text{Turnover} = \dfrac{D}{\text{Cycle Inventory}} = \dfrac{2D}{EOQ} \]
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 mt-1">Số lần tồn kho được quay vòng trong kỳ.</p>
                    </div>

                    <div>
                        <p class="font-semibold">8. Thời gian lưu kho trung bình (Average Flow Time)</p>
                        <div class="ie-formula text-center py-2">
                            \[ \text{Average Flow Time} = \dfrac{1}{\text{Turnover}} = \dfrac{EOQ}{2D} \]
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 mt-1">Thời gian trung bình một đơn vị hàng tồn kho (đơn vị: kỳ, ví dụ năm hoặc tháng).</p>
                    </div>
                </div>

                <!-- Ví dụ minh họa (giữ nguyên nhưng thêm một chút nhấn mạnh) -->
                <h4 class="font-semibold mt-8 mb-3 text-lg">Ví dụ minh họa</h4>
                <p class="text-sm text-slate-600 dark:text-slate-400">
                    D = 1.200 đơn vị/năm, S = 100.000 VNĐ/lần, H = 20.000 VNĐ/đơn vị/năm
                </p>
                <div class="ie-formula mt-3 text-center">
                    \[ EOQ = \sqrt{\dfrac{2 \times 1200 \times 100000}{20000}} = \sqrt{12000} \approx 109.54 \approx 110 \text{ đơn vị} \]
                </div>
                <p class="text-sm mt-3 text-slate-600 dark:text-slate-400">
                    → Cycle Inventory ≈ 55 đơn vị<br>
                    → Số lần đặt hàng ≈ 10.91 lần/năm<br>
                    → Tổng chi phí ≈ 2.182.000 VNĐ/năm
                </p>
            </div>

            <!-- Kết quả chi tiết sẽ được inject vào đây bởi JS -->
            <div id="detailed-results" class="space-y-6"></div>
            
            <div class="ie-card">
                <h3 class="ie-section-title">Câu hỏi thường gặp (FAQ)</h3>
                <div class="ie-faq space-y-3 mt-4">
                    <details>
                        <summary>EOQ có phù hợp với mọi loại hàng không?</summary>
                        <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            Phù hợp nhất với hàng có nhu cầu ổn định, không hỏng hóc. Không tốt cho hàng thời vụ hoặc nhu cầu biến động mạnh.
                        </p>
                    </details>
                    <details>
                        <summary>Nên làm tròn EOQ lên hay xuống?</summary>
                        <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            Thường làm tròn đến số nguyên gần nhất, sau đó so sánh tổng chi phí thực tế ở hai mức gần kề để chọn mức tối ưu hơn.
                        </p>
                    </details>
                    <details>
                        <summary>Vòng quay tồn kho (Inventory Turnover) nghĩa là gì?</summary>
                        <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            Cho biết số lần tồn kho được "quay vòng" trong kỳ. Giá trị càng cao → quản lý tồn kho càng hiệu quả.
                        </p>
                    </details>
                </div>
            </div>

        </div>
    </div>

</main>

<!-- FOOTER -->
<div id="ie-footer"></div>

<script src="/js/layout.js"></script>
<script src="./calculator.js"></script>


</body>
</html>