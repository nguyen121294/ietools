<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¥ H√¨nh D·ª± B√°o ARIMA</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { primary: "#137fec", "background-dark": "#101922" },
                    fontFamily: { display: ["Space Grotesk", "sans-serif"] }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async></script>

    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="bg-slate-50 dark:bg-background-dark">

<div id="header-placeholder"></div>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

    <div class="mb-8">
        <h1 class="text-3xl font-bold tracking-tight dark:text-white">M√¥ H√¨nh D·ª± B√°o ARIMA</h1>
        <p class="mt-2 text-slate-500 dark:text-slate-400">
            D·ª± b√°o chu·ªói th·ªùi gian d·ª±a tr√™n m√¥ h√¨nh T·ª± h·ªìi quy T√≠ch h·ª£p Trung b√¨nh tr∆∞·ª£t (ARIMA) v·ªõi kh·∫£ nƒÉng x·ª≠ l√Ω d·ªØ li·ªáu kh√¥ng d·ª´ng.
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <div class="space-y-6">
            <div class="ie-card">
                <h2 class="ie-card-title">C·∫•u h√¨nh m√¥ h√¨nh (p, d, q)</h2>
                
                <div class="mb-4">
                    <label class="ie-input-label">D·ªØ li·ªáu ƒë·∫ßu v√†o (.xlsx, .csv)</label>
                    <input type="file" id="fileInput" class="ie-input" accept=".xlsx, .xls, .csv">
                    <button class="text-primary text-xs mt-2 font-medium" onclick="downloadTemplate()">+ T·∫£i template m·∫´u</button>
                </div>

                <div class="grid grid-cols-3 gap-3">
                    <div>
                        <label class="ie-input-label">p (AR)</label>
                        <input type="number" class="ie-input" id="p_val" value="1" min="0">
                    </div>
                    <div>
                        <label class="ie-input-label">d (I)</label>
                        <input type="number" class="ie-input" id="d_val" value="1" min="0" max="2">
                    </div>
                    <div>
                        <label class="ie-input-label">q (MA)</label>
                        <input type="number" class="ie-input" id="q_val" value="0" min="0">
                    </div>
                </div>

                <div class="mt-4">
                    <label class="ie-input-label">S·ªë k·ª≥ d·ª± b√°o ti·∫øp theo</label>
                    <input type="number" class="ie-input" id="forecastPoints" value="5">
                </div>

                <button class="ie-button w-full mt-4" onclick="calculateForecast()">
                    Ph√¢n t√≠ch & D·ª± b√°o
                </button>

                <div id="result-summary" class="hidden mt-6 pt-6 border-t border-slate-100 dark:border-slate-800">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">H·ªá s·ªë ∆∞·ªõc l∆∞·ª£ng</h3>
                    <div id="params-output" class="text-sm font-mono text-primary space-y-1"></div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-2 space-y-6">
            
            <div class="ie-card">
                <h2 class="ie-card-title">Tr·ª±c quan h√≥a d·ª± b√°o</h2>
                <div class="h-[400px] w-full">
                    <canvas id="forecastChart"></canvas>
                </div>
            </div>

            <div id="table-card" class="ie-card hidden">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="ie-card-title !mb-0">Chi ti·∫øt d·ª± b√°o</h2>
                    <button class="text-primary font-bold text-sm" onclick="exportExcel()">T·∫£i k·∫øt qu·∫£ ‚Üì</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="text-slate-500 border-b dark:border-slate-800">
                            <tr>
                                <th class="pb-2 font-semibold">Giai ƒëo·∫°n</th>
                                <th class="pb-2 font-semibold text-right">Gi√° tr·ªã d·ª± b√°o</th>
                            </tr>
                        </thead>
                        <tbody id="forecastTableBody" class="dark:text-slate-300"></tbody>
                    </table>
                </div>
            </div>

            <div class="ie-card">
                <h2 class="ie-card-title">C·∫•u tr√∫c to√°n h·ªçc ARIMA</h2>
                <div class="ie-formula text-center py-6 text-lg">
                    \[ Y'_t = c + \phi_1 Y'_{t-1} + ... + \phi_p Y'_{t-p} + \theta_1 \epsilon_{t-1} + ... + \theta_q \epsilon_{t-q} + \epsilon_t \]
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-xs dark:text-slate-400 leading-relaxed">
                    <p><strong>AutoRegressive (p):</strong> S·ª≠ d·ª•ng m·ªëi quan h·ªá ph·ª• thu·ªôc gi·ªØa m·ªôt quan s√°t v√† m·ªôt s·ªë l∆∞·ª£ng quan s√°t tr·ªÖ (lags).</p>
                    <p><strong>Integrated (d):</strong> S·ª≠ d·ª•ng sai ph√¢n c√°c quan s√°t th√¥ (tr·ª´ quan s√°t ·ªü b∆∞·ªõc th·ªùi gian tr∆∞·ªõc ƒë√≥) ƒë·ªÉ l√†m chu·ªói th·ªùi gian tr·ªü n√™n d·ª´ng.</p>
                    <p><strong>Moving Average (q):</strong> S·ª≠ d·ª•ng m·ªëi quan h·ªá ph·ª• thu·ªôc gi·ªØa m·ªôt quan s√°t v√† sai s·ªë c√≤n l·∫°i t·ª´ m√¥ h√¨nh trung b√¨nh tr∆∞·ª£t √°p d·ª•ng cho c√°c quan s√°t tr·ªÖ.</p>
                </div>
            </div>

            <div class="ie-card">
                <h3 class="ie-section-title !mt-0">C√¢u h·ªèi th∆∞·ªùng g·∫∑p & M·∫πo c·∫•u h√¨nh</h3>
                <div class="ie-faq space-y-3 mt-4">
                    
                    <details open>
                        <summary class="text-primary font-bold">M·∫πo ch·ªçn b·ªô (p, d, q) theo lo·∫°i d·ªØ li·ªáu</summary>
                        <div class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            <p class="mb-2">H√£y quan s√°t bi·ªÉu ƒë·ªì l·ªãch s·ª≠ c·ªßa b·∫°n v√† th·ª≠ c·∫•u h√¨nh sau:</p>
                            <div class="overflow-x-auto">
                                <table class="w-full text-[11px] border-collapse mb-3">
                                    <thead>
                                        <tr class="bg-slate-100 dark:bg-slate-800 text-left">
                                            <th class="p-2 border dark:border-slate-700">ƒê·∫∑c ƒëi·ªÉm d·ªØ li·ªáu</th>
                                            <th class="p-2 border dark:border-slate-700">B·ªô (p, d, q) g·ª£i √Ω</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="p-2 border dark:border-slate-700">D·ªØ li·ªáu ·ªïn ƒë·ªãnh, kh√¥ng c√≥ xu h∆∞·ªõng r√µ r√†ng</td>
                                            <td class="p-2 border dark:border-slate-700 font-mono text-primary">(1, 0, 0) ho·∫∑c (2, 0, 0)</td>
                                        </tr>
                                        <tr>
                                            <td class="p-2 border dark:border-slate-700">C√≥ xu h∆∞·ªõng tƒÉng/gi·∫£m (Trend) ·ªïn ƒë·ªãnh</td>
                                            <td class="p-2 border dark:border-slate-700 font-mono text-primary">(1, 1, 0) - Ph·ªï bi·∫øn nh·∫•t</td>
                                        </tr>
                                        <tr>
                                            <td class="p-2 border dark:border-slate-700">TƒÉng tr∆∞·ªüng n√≥ng ho·∫∑c bi·∫øn ƒë·ªông m·∫°nh</td>
                                            <td class="p-2 border dark:border-slate-700 font-mono text-primary">(1, 2, 1) ho·∫∑c (2, 2, 2)</td>
                                        </tr>
                                        <tr>
                                            <td class="p-2 border dark:border-slate-700">D·ªØ li·ªáu ƒë·ª©ng y√™n ho·∫∑c "b∆∞·ªõc ƒëi ng·∫´u nhi√™n"</td>
                                            <td class="p-2 border dark:border-slate-700 font-mono text-primary">(0, 1, 0)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="italic text-[11px] text-yellow-600 dark:text-yellow-500">üí° Tip: N·∫øu d·ª± b√°o ra m·ªôt ƒë∆∞·ªùng th·∫≥ng t·∫Øp qu√° m·ª©c, h√£y th·ª≠ tƒÉng <strong>p</strong> l√™n th√™m 1 ƒë∆°n v·ªã.</p>
                        </div>
                    </details>

                    <details>
                        <summary>Khi n√†o n√™n d√πng ARIMA thay v√¨ Holt-Winters?</summary>
                        <div class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            ARIMA m·∫°nh h∆°n khi d·ªØ li·ªáu kh√¥ng c√≥ t√≠nh m√πa v·ª• r√µ r√†ng nh∆∞ng c√≥ c√°c m·ªëi t∆∞∆°ng quan ph·ª©c t·∫°p gi·ªØa c√°c k·ª≥ (v√≠ d·ª•: gi√° ch·ª©ng kho√°n, ch·ªâ s·ªë kinh t·∫ø). Holt-Winters ph√π h·ª£p h∆°n cho d·ªØ li·ªáu c√≥ t√≠nh chu k·ª≥/m√πa v·ª• l·∫∑p l·∫°i ƒë·ªÅu ƒë·∫∑n.
                        </div>
                    </details>

                    <details>
                        <summary>√ù nghƒ©a c·ªßa th√¥ng s·ªë d (Integrated) l√† g√¨?</summary>
                        <div class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            N·∫øu d·ªØ li·ªáu c·ªßa b·∫°n c√≥ xu h∆∞·ªõng tƒÉng ho·∫∑c gi·∫£m li√™n t·ª•c (kh√¥ng d·ª´ng), b·∫°n c·∫ßn \(d=1\) ho·∫∑c \(d=2\) ƒë·ªÉ "l√†m ph·∫≥ng" d·ªØ li·ªáu tr∆∞·ªõc khi d·ª± b√°o. N·∫øu \(d=0\), m√¥ h√¨nh gi·∫£ ƒë·ªãnh d·ªØ li·ªáu ƒë√£ ·ªïn ƒë·ªãnh quanh m·ªôt m·ª©c trung b√¨nh.
                        </div>
                    </details>

                    <details>
                        <summary>T·∫°i sao h·ªá s·ªë q (MA) th∆∞·ªùng ƒë·ªÉ b·∫±ng 0?</summary>
                        <div class="mt-2 text-sm text-slate-600 dark:text-slate-400">
                            Trong c√°c m√¥ h√¨nh d·ª± b√°o kinh doanh th·ª±c t·∫ø, th√†nh ph·∫ßn t·ª± h·ªìi quy (AR - p) th∆∞·ªùng quan tr·ªçng h∆°n. Ch·ªâ th√™m \(q > 0\) khi b·∫°n tin r·∫±ng c√°c sai s·ªë ƒë·ªôt bi·∫øn c·ªßa qu√° kh·ª© (v√≠ d·ª•: m·ªôt ƒë·ª£t kh·ªßng ho·∫£ng ng·∫Øn) v·∫´n ƒëang ti·∫øp t·ª•c ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªán t·∫°i.
                        </div>
                    </details>

                </div>
            </div>

        </div>
    </div>
</main>

<script src="/js/layout.js"></script>
<script src="calculator.js"></script>
</body>
</html>